(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var t=arguments[l];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},e.apply(this,arguments)}const l=window.wp.element,{i18n:{__,sprintf:t},hooks:{addFilter:o},components:{Placeholder:n,ToggleControl:a,Card:r,CardHeader:c,CardBody:s,Spinner:i,Icon:p,Dashicon:m,Button:d,Tooltip:u,Popover:h,TextControl:w,BaseControl:E,ColorPicker:g,RangeControl:b,DropdownMenu:f,SelectControl:v,ColorIndicator:C,FormFileUpload:y,useBaseControlProps:S,__experimentalHStack:x,__experimentalNumberControl:k,__experimentalBorderBoxControl:I},blockEditor:{MediaUpload:P,MediaUploadCheck:N},element:{useState:B,useEffect:V,useRef:M}}=wp;o("wecodeart.admin.tabs.plugins","wecodeart/scrolltop/admin/panel",(function(e){return[...e,{name:"wca-scrolltop",title:__("Scroll Top","wca-scrolltop"),render:e=>(0,l.createElement)(O,e)}]}));const O=t=>{const{settings:o,saveSettings:a,isRequesting:h,createNotice:y}=t;if(h||!o)return(0,l.createElement)(n,{icon:(0,l.createElement)(i,null),label:__("Loading","wca-scrolltop"),instructions:__("Please wait, loading settings...","wca-scrolltop")});const[P,N]=B(null),M=(e=>{let{scrolltop:l}=e;return l})(o),[O,R]=B(M),[_,j]=B(!0),A=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l={...O?.style,...e};R({...O,style:l})},z=()=>(N(!1),y("success",__("Settings saved.","wca-scrolltop"))),D=e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`;return V((()=>{const e=()=>{const e=window.scrollY;j(e<O?.scroll?.offset)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[O?.scroll?.offset]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"grid",style:{"--wca--columns":2}},(0,l.createElement)("div",{className:"g-col-1"},(0,l.createElement)(r,{className:"border shadow-none"},(0,l.createElement)(c,null,(0,l.createElement)("h5",{className:"text-uppercase fw-medium m-0"},__("Design","wca-scrolltop"))),(0,l.createElement)(s,{style:{color:"rgb(30, 30, 30)"}},(0,l.createElement)("p",null,(0,l.createElement)((t=>{const{baseControlProps:o,controlProps:n}=S(t),{disabled:a}=o,r=O?.icon.paths||["M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.5 9.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"],[c,s]=B(O?.icon?.viewBox);return(0,l.createElement)(E,o,(0,l.createElement)("p",null,(0,l.createElement)(x,{style:{alignItems:"stretch"}},(0,l.createElement)(w,e({},n,{disabled:a,className:"flex-grow-1",placeholder:__("ViewBox","wca-scrolltop"),value:c,onChange:s})),(0,l.createElement)(d,{disabled:a,style:{height:"initial"},isSecondary:!0,isSmall:!0,onClick:()=>{R({...O,icon:{...O?.icon,viewBox:c}})},showTooltip:!0},__("Update SVG viewBox","wca-scrolltop")))),(0,l.createElement)("p",null,r.map(((t,o)=>(0,l.createElement)("p",{style:{marginTop:0}},(0,l.createElement)(x,{key:o,style:{alignItems:"stretch"}},(0,l.createElement)(w,e({},n,{disabled:a,className:"flex-grow-1",placeholder:__("Path","wca-scrolltop"),value:t,onChange:e=>((e,l)=>{const t=[...r];t[e]=l,R({...O,icon:{...O?.icon,paths:t.filter()}})})(o,e)})),0!==o&&(0,l.createElement)(d,{disabled:a,style:{height:"initial"},isDestructive:!0,isSmall:!0,onClick:()=>(e=>{const l=[...r];l.splice(e,1),R({...O,icon:{...O?.icon,paths:l}})})(o)},(0,l.createElement)(m,{icon:"no"}))))))),(0,l.createElement)(d,{disabled:a,isPrimary:!0,onClick:()=>{const e=[...r,""];R({...O,icon:{...O?.icon,paths:e}})}},__("Add Path","wca-scrolltop")))}),{label:__("Icon","wca-scrolltop"),help:__("Use simple icons like FontAwesome or Bootstrap. Each icon can have 1 or more path elements.","wca-scrolltop")})),(0,l.createElement)("p",null,(0,l.createElement)(v,{label:__("Position","wca-scrolltop"),value:O?.position,options:[{label:__("Left","wca-scrolltop"),value:"left"},{label:__("Right","wca-scrolltop"),value:"right"}],onChange:e=>R({...O,position:e}),__nextHasNoMarginBottom:!0})),(0,l.createElement)("p",null,(0,l.createElement)(x,null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Horizontal Margin","wca-scrolltop"),help:__("Number of pixels for horizontal window distance.","wca-scrolltop"),min:0,value:O?.style?.[O?.position],onChange:e=>A({[O?.position]:parseInt(e)})}),(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Vertical Margin","wca-scrolltop"),help:__("Number of pixels for vertical window distance.","wca-scrolltop"),min:0,value:O?.style?.bottom,onChange:e=>A({bottom:parseInt(e)})}))),(0,l.createElement)("p",null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Size","wca-scrolltop"),min:20,value:O?.style?.width,onChange:e=>A({width:parseInt(e),height:parseInt(e)}),help:__("In pixels.","wca-scrolltop")})),(0,l.createElement)("p",null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Padding","wca-scrolltop"),min:0,value:O?.style?.padding,onChange:e=>A({padding:parseInt(e)}),help:__("In pixels.","wca-scrolltop")})),(0,l.createElement)("p",null,(0,l.createElement)(b,{label:__("Opacity","wca-scrolltop"),value:O?.style?.opacity,onChange:e=>A({opacity:parseInt(e)}),min:0,step:5,max:100})),(0,l.createElement)("p",null,(0,l.createElement)(E,{label:__("Colors","wca-scrolltop")},(0,l.createElement)(x,{style:{justifyContent:"flex-start"}},(0,l.createElement)(f,{label:__("Background Color","wca-scrolltop"),icon:(0,l.createElement)(C,{colorValue:O?.style?.backgroundColor}),toggleProps:{style:{height:"initial",minWidth:"initial",padding:0}},popoverProps:{focusOnMount:"container",position:"bottom",noArrow:!1}},(()=>(0,l.createElement)(g,{color:O?.style?.backgroundColor,onChange:e=>A({backgroundColor:e}),enableAlpha:!0,defaultValue:"#000"}))),(0,l.createElement)(f,{label:__("Icon Color","wca-scrolltop"),icon:(0,l.createElement)(C,{colorValue:O?.style?.color}),toggleProps:{style:{height:"initial",minWidth:"initial",padding:0}},popoverProps:{focusOnMount:"container",position:"bottom",noArrow:!1}},(()=>(0,l.createElement)(g,{color:O?.style?.color,onChange:e=>A({color:e}),enableAlpha:!0,defaultValue:"#000"})))))),(0,l.createElement)("p",null,(0,l.createElement)(I,{label:__("Border","wca-scrolltop"),value:O?.style?.border,onChange:e=>A({border:e})})),(0,l.createElement)("p",null,(0,l.createElement)(b,{label:__("Radius","wca-scrolltop"),allowReset:!0,value:O?.style?.borderRadius,onChange:e=>A({borderRadius:e}),min:0}))))),(0,l.createElement)("div",{className:"g-col-1"},(0,l.createElement)(r,{className:"border shadow-none position-sticky sticky-top h-100"},(0,l.createElement)(c,null,(0,l.createElement)("h5",{className:"text-uppercase fw-medium m-0"},__("Functionality","wca-scrolltop"))),(0,l.createElement)(s,{style:{color:"rgb(30, 30, 30)"}},(0,l.createElement)("p",null,(0,l.createElement)(v,{label:__("Action","wca-scrolltop"),value:O?.action,options:[{label:"Scroll to Top",value:"top"},{label:"Scroll to Element",value:"element"}],onChange:e=>{"top"===e&&delete O.element,R({...O,action:e})}})),"element"===O?.action&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("p",null,(0,l.createElement)(w,{label:__("Element selector","wca-scrolltop"),value:O?.element?.selector,onChange:e=>R({...O,element:{...O.element,selector:e}}),help:__("CSS selector of the element, you are trying to scroll to. Eg: #myDivID, .myDivClass","wca-scrolltop")})),(0,l.createElement)("p",null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Element offset","wca-scrolltop"),value:O?.element?.offset,onChange:e=>R({...O,element:{...O.element,offset:parseInt(e)}}),help:__("Negative value allowed. Use this to precisely set scroll position when you have overlapping elements.","wca-scrolltop")}))),(0,l.createElement)("p",null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Scroll offset","wca-scrolltop"),help:__("Number of pixels to be scrolled before the button appears.","wca-scrolltop"),min:0,value:O?.scroll?.offset,onChange:e=>R({...O,scroll:{...O?.scroll,offset:parseInt(e)}})})),(0,l.createElement)("p",null,(0,l.createElement)(k,{isShiftStepEnabled:!0,spinControls:"custom",label:__("Scroll duration","wca-scrolltop"),help:__("Window scroll duration in milliseconds when the button is pressed.","wca-scrolltop"),min:100,disabled:"disabled",value:O?.scroll?.duration,onChange:e=>R({...O,scroll:{...O?.scroll,duration:parseInt(e)}})})),(0,l.createElement)("p",null,(0,l.createElement)(w,{label:__("Class(es)","wca-scrolltop"),value:O?.classes,onChange:e=>R({...O,classes:e}),help:__("You can use utilities like: d-none, d-md-block; and so on.","wca-scrolltop")})))))),(0,l.createElement)(u,{text:__("Preview","wca-scrolltop")},(0,l.createElement)(d,{className:"position-fixed"+(O?.classes?" "+O.classes:""),style:function(){let{position:e,style:{padding:l,border:t={},borderRadius:o,opacity:n,width:a,height:r,left:c="initial",right:s="initial",bottom:i=0,backgroundColor:p="transparent",color:m="inherit"}={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d={zIndex:_?-1:5,bottom:i,width:a,height:r,padding:l,color:m,borderRadius:o,backgroundColor:p,opacity:_?0:`${n}%`,left:"left"===e?c:"initial",right:"right"===e?s:"initial",transition:"all .3s ease-in-out"},u={};const h=Object.keys(t),w=["top","left","right","bottom"],E=w.some((e=>h.includes(e)));if(E)for(const e in t){const l=t[e];u={...u,[`border${D(e)}`]:Object.values(l).join(" ")}}else u={border:Object.values(t).join(" ")};return d={...d,...u},d}(O)},(0,l.createElement)(p,{icon:()=>(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:O?.icon?.viewBox||"0 0 16 16"},O?.icon?.paths.map((e=>(0,l.createElement)("path",{fill:"currentColor",d:e}))))}))),(0,l.createElement)("hr",{style:{margin:"20px 0"}}),(0,l.createElement)(d,{className:"button",isPrimary:!0,isLarge:!0,icon:P&&(0,l.createElement)(i,null),onClick:()=>{N(!0),a({scrolltop:O},z)},disabled:P},P?"":__("Save","wecodeart")))}})();